<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trindade Real Editor</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #ffd700; --dark: #0a0a0a; }
        body, html { margin: 0; padding: 0; height: 100%; background: var(--dark); color: white; font-family: 'Montserrat', sans-serif; overflow: hidden; }

        /* --- TELA DE INTRO --- */
        #intro-screen {
            position: fixed; width: 100%; height: 100%; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 100; background: var(--dark);
            transition: transform 0.8s ease-in-out;
        }
        .tridente { width: 150px; fill: var(--gold); opacity: 0; animation: surge 2s forwards; }
        .nome { font-family: 'Cinzel'; font-size: 2.5rem; letter-spacing: 5px; text-shadow: 0 0 15px var(--gold); opacity: 0; animation: surge 1.5s 0.5s forwards; }
        .btn-main { margin-top: 30px; padding: 15px 40px; border: 2px solid var(--gold); background: transparent; color: var(--gold); border-radius: 30px; font-weight: bold; cursor: pointer; opacity: 0; animation: surge 1s 1.5s forwards; }

        /* --- PAINEL EDITOR --- */
        #editor-panel { display: none; height: 100vh; flex-direction: column; align-items: center; padding: 20px; box-sizing: border-box; }
        
        .canvas-container { position: relative; width: 100%; max-width: 400px; flex-grow: 1; display: flex; align-items: center; justify-content: center; background: #111; border-radius: 15px; overflow: hidden; border: 1px solid #333; }
        canvas { max-width: 100%; max-height: 100%; object-fit: contain; }

        .controls { width: 100%; padding: 20px 0; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .filter-btn { padding: 12px; background: #222; border: 1px solid #444; color: white; border-radius: 8px; font-size: 12px; cursor: pointer; }
        .filter-btn.active { border-color: var(--gold); color: var(--gold); }

        /* --- BOTÃO ABAIXAR FLUTUANTE --- */
        #btn-download {
            position: fixed; bottom: 30px; right: 20px; width: 70px; height: 70px; 
            background: var(--gold); color: black; border-radius: 50%; border: none;
            font-weight: bold; font-size: 10px; display: flex; flex-direction: column;
            align-items: center; justify-content: center; box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            cursor: pointer; z-index: 10;
        }

        input[type="file"] { display: none; }
        @keyframes surge { to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="intro-screen">
        <svg class="tridente" viewBox="0 0 512 512"><path d="M448 32h-16c-8.8 0-16 7.2-16 16v96c0 53-43 96-96 96s-96-43-96-96V48c0-8.8-7.2-16-16-16h-16c-8.8 0-16 7.2-16 16v96c0 53-43 96-96 96s-96-43-96-96V48c0-8.8-7.2-16-16-16H64c-8.8 0-16 7.2-16 16v96c0 84.4 65.4 153.6 148.1 159.5L192 480c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V303.5c82.7-5.9 148.1-75.1 148.1-159.5V48c0-8.8-7.2-16-16-16z"/></svg>
        <h1 class="nome">Trindade</h1>
        <button class="btn-main" onclick="document.getElementById('fileInput').click()">CARREGAR ARQUIVO</button>
        <input type="file" id="fileInput" accept="image/*, video/*" onchange="handleFile(this)">
    </div>

    <div id="editor-panel">
        <h2 style="font-family: 'Cinzel'; color: var(--gold);">Studio Trindade</h2>
        
        <div class="canvas-container">
            <canvas id="mainCanvas"></canvas>
        </div>

        <div class="controls">
            <button class="filter-btn" onclick="applyFilter('none')">NORMAL</button>
            <button class="filter-btn" onclick="applyFilter('grayscale(100%)')">NOIR (P&B)</button>
            <button class="filter-btn" onclick="applyFilter('sepia(100%) contrast(1.2)')">VINTAGE</button>
            <button class="filter-btn" onclick="applyFilter('hue-rotate(180deg) saturate(2)')">CINEMÁTICO</button>
            <button class="filter-btn" onclick="applyFilter('brightness(1.5) contrast(0.8)')">DREAMY</button>
            <button class="filter-btn" onclick="applyFilter('invert(1)')">NEGATIVE</button>
        </div>

        <button id="btn-download" onclick="downloadResult()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/></svg>
            ABAIXAR
        </button>
    </div>

    <script>
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        let currentImage = new Image();
        let currentFilter = 'none';

        function handleFile(input) {
            const file = input.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                currentImage.onload = function() {
                    // Configura o tamanho do canvas para o tamanho real da imagem
                    canvas.width = currentImage.width;
                    canvas.height = currentImage.height;
                    draw();
                    
                    // Muda de tela
                    document.getElementById('intro-screen').style.transform = 'translateY(-100%)';
                    document.getElementById('editor-panel').style.display = 'flex';
                }
                currentImage.src = e.target.result;
            }
            reader.readAsDataURL(file);
        }

        function applyFilter(filter) {
            currentFilter = filter;
            draw();
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.filter = currentFilter;
            ctx.drawImage(currentImage, 0, 0);
        }

        function downloadResult() {
            // Cria um link temporário para download
            const link = document.createElement('a');
            link.download = 'Trindade_Edit_' + Date.now() + '.png';
            
            // Converte o canvas com o filtro aplicado para uma imagem real
            link.href = canvas.toDataURL("image/png");
            link.click();
            
            alert("Abaixando sua edição...");
        }

        // Suporte para vídeo (simplificado para imagem neste exemplo, 
        // mas o canvas já captura o frame do vídeo se adaptado)
    </script>
</body>
</html>
